---
title: "Weekly United States COVID-19 Cases and Deaths by State"
output: html_document
---

```{r}
library("tidyverse") 
library("dplyr")
library("janitor")
library("lubridate")
library("ggplot2")
```

```{r}
options(scipen=999)
```


```{r}
Weekly <- read_csv("/Users/stephanie/Desktop/BIS15W2025_group13/Stephanie/WeeklyCases.csv") %>% clean_names()
```
```{r}
Weekly5 <- Weekly %>% 
  filter(state=="NY"|state=="NYC"|state=="CA"|state=="TX"|state=="PA"|state=="FL") %>% 
  select(state, start_date, new_cases) %>% 
  pivot_wider(names_from = state,
              values_from = new_cases) %>% 
  mutate(TotalNewYork=NY+NYC) %>% 
  rename(California=CA, Florida=FL, Pennsylvania=PA, Texas=TX, New_York=TotalNewYork) %>% 
  pivot_longer(!start_date, 
               names_to="state",
               values_to = "new_cases") %>% 
  filter(state!="NY" & state!="NYC") %>% 
  mutate(start_date = as.Date(start_date, format = "%m/%d/%Y"),
         year = year(start_date),
         month = month(start_date))
```


```{r}
Weekly5 %>% 
  group_by(state) %>% 
  ggplot(aes(x=start_date, y=new_cases, color=state))+
  geom_line()+
  theme_minimal()+
  scale_x_date(labels = scales::date_format("%b %Y"), breaks = "1 months")+
  theme(legend.position = "bottom",
    axis.text.x = element_text(size = 7, angle = 70, hjust = 1))+
  labs(title="Weekly Covid-19 Cases by State in 2019-2023",
       x="Months (2019-2023)",
       y="New Cases",
       color="State")
```

```{r}
Weekly %>% 
  filter(state=="NY"|state=="NYC"|state=="CA"|state=="TX"|state=="PA"|state=="FL") %>% 
  select(state, start_date, tot_cases) %>% 
  pivot_wider(names_from = state,
              values_from = tot_cases) %>% 
  mutate(TotalNewYork=NY+NYC) %>% 
  rename(California=CA, Florida=FL, Pennsylvania=PA, Texas=TX, New_York=TotalNewYork) %>% 
  pivot_longer(!start_date, 
               names_to="state",
               values_to = "total_cases") %>% 
  filter(state!="NY" & state!="NYC") %>% 
  mutate(start_date = as.Date(start_date, format = "%m/%d/%Y"),
         year = year(start_date),
         month = month(start_date))
```


Observations:
- Where are the peaks?
- Do some research, why the sudden peaks?
- What is the highest peak?
- Which seasons/months were the highest peaks? Maybe start of new school session or holidays like christmas, people likely to spend more time outside in close contact. 
- This marks the first death

Connections with death?
- The weeks with most deaths?
- How much did it collide with new cases

